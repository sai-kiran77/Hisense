<ng-container *ngIf="!show404">
    <section class="catalog" id="catalog-page">
        <!-- <div class="catalog-banner catalog-banner_ui_white" data-ui-white="" style="background-color: #000;">
            <div class="catalog-banner__content">
                <div class="catalog-banner__content-inner">
                    <h1 class="catalog-banner__title">{{metaData?.name}}</h1>
                    <h3 class="catalog-banner__sub__title" *ngIf="metaData?.subcategories.length == 1">{{metaData?.subcategories[0].name}}</h3>
                </div>
            </div>
            <div class="catalog-banner__image-wrapper">
                <img [alt]="metaData?.name" class="catalog-banner__image" [src]="metaData?.thumb_image_medium.full_url">
            </div>
        </div> -->
        <div class="breadcrumb__yellow__banner">
            <h1>{{metaData?.name}}</h1>
        </div>
        <ng-container *ngIf="metaData?.cover_media[0]?.file_type == 'video'">
            <div [ngClass]="{'card is-loading': isVideoLoading}">
                <div class="image" style="width:100%;height:655px;">
                    <iframe allow="autoplay" (load)="load()" *ngFor="let media of metaData?.cover_media" width="100%"
                        height="655" [src]="media?.sanatized_url"></iframe>
                </div>
            </div>
        </ng-container>
    </section>

    <div class="product-listing" *ngIf="!metaData?.parent_category_id">
        <div class="product-listing-inner"
            style="flex-wrap: wrap !important;width: 80% !important;margin: auto !important;">
            <a class="product-listing-tab" style="min-width: 350px;width: auto !important;flex: 1;"
                [routerLink]="prod.relative_url" *ngFor="let prod of metaData?.subcategories">
                <a class="product-listing-img" style="width: 100%;height: 150px;display: flex;justify-content: center;
                align-items: center; overflow: visible;">
                    <img *ngIf="prod?.thumb_image?.full_url" [src]="prod.thumb_image?.full_url"
                        style="max-height: 100px;max-width: 75% !important;">
                    <img *ngIf="!prod?.thumb_image?.full_url" src="assets/images/prod__placeholder.png"
                        style="max-height: 100px;max-width: 75% !important;">
                </a>
                <div style="margin-top: 40px;">
                    <div class="product-listing-tab-content">
                        <h4>{{prod.name}}</h4>
                        <!-- <div class="product-listing-description"></div> -->
                    </div>
                    <div><a class="btn-hisense-more">More Detail</a></div>
                </div>
            </a>
        </div>
    </div>

    <!-- <div class="product-listing" *ngIf="!metaData?.parent_category_id">
        <div class="product-listing-inner" style="flex-wrap: nowrap !important;width: 80%;margin: auto;">
            <div [id]="subCat.code" *ngFor="let subCat of metaData?.subcategories">
                <a class="product-listing-tab" [routerLink]="subCat.relative_url" style="width: 100% !important;min-height: 350px !important;">
                    <a class="product-listing-img trackin" style="overflow: visible !important;">
                        <img *ngIf="subCat?.thumb_image?.full_url" [src]="subCat?.thumb_image?.full_url">
                        <img *ngIf="!subCat?.thumb_image?.full_url" src="assets/images/prod__placeholder.png">
                    </a>
                    <div style="margin-top: auto;">
                        <div class="product-listing-tab-content">
                            <h4>{{subCat.name}}</h4>
                        </div>
                        <div class="product-listing-tab-buttons trackin" style="transform: translateY(35px);">
                            <div><a class="btn-hisense">More Detail</a></div>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </div> -->

    <div class="product-listing" *ngIf="!metaData?.parent_category_id">
        <div class="product-listing-inner"
            style="flex-wrap: wrap !important;width: 80% !important;margin: auto !important;">
            <a class="product-listing-tab" style="min-width: 350px;width: auto !important;flex: 1;"
                [routerLink]="prod.relative_url" *ngFor="let prod of metaData?.subcategories">
                <a class="product-listing-img" style="width: 100%;height: 150px;display: flex;justify-content: center;
                align-items: center; overflow: visible;">
                    <img *ngIf="prod?.thumb_image?.full_url" [src]="prod.thumb_image?.full_url"
                        style="max-height: 100px;max-width: 75% !important;">
                    <img *ngIf="!prod?.thumb_image?.full_url" src="assets/images/prod__placeholder.png"
                        style="max-height: 100px;max-width: 75% !important;">
                </a>
                <div style="margin-top: 40px;">
                    <div class="product-listing-tab-content">
                        <h4>{{prod.name}}</h4>
                        <!-- <div class="product-listing-description"></div> -->
                    </div>
                    <div><a class="btn-hisense-more">More Detail</a></div>
                </div>
            </a>
        </div>
    </div>

    <div class="product-listing" *ngIf="metaData?.parent_category_id">
        <div class="product-listing-inner product-listing-grid-layout"
            style="flex-wrap: wrap !important;width: 90% !important;margin: auto !important;">
            <ng-container *ngFor="let product of metaData?.category_products">
                <ng-container *ngIf="product.product?.product_variants.length">
                    <a #currentindex data-index="0" class="product-listing-tab"
                        style="width: auto !important;flex: 1;cursor: default;">
                        <span style="font-size: 30px;font-weight: bold;">{{product?.product?.name}}</span>
                        <a class="product-listing-img" style="width: 100%;height: 225px;display: flex;justify-content: center;
                        align-items: center; overflow: visible;cursor: default;">
                            <img *ngIf="product?.product?.product_variants[product.currentIndex]?.thumb_image_medium?.full_url"
                                [src]="product?.product?.product_variants[product.currentIndex]?.thumb_image_medium?.full_url"
                                style="max-height: 225px;width: 225px !important;">
                            <img *ngIf="!product?.product?.product_variants[product.currentIndex]?.thumb_image_medium?.full_url"
                                src="assets/images/prod__placeholder.png"
                                style="max-height: 200px;max-width: 90% !important;">
                        </a>
                        <div>
                            <div style="font-size: 10px;color: gray;">Modal Code</div>
                            <span
                                style="font-size: 20px;">{{product?.product?.product_variants[product.currentIndex]?.code}}</span>
                        </div>
                        <div style="margin-top: 40px;">
                            <div class="product-listing-tab-content">
                                <!-- <h4>{{prod.name}}</h4> -->
                                <!-- <div class="product-listing-description"></div> -->
                                <div class="product__size">
                                    <div [ngClass]="{'active':product.currentIndex == i}" class="item"
                                        (click)="product.currentIndex = i"
                                        *ngFor="let size of product.product.product_variants;let i = index;">
                                        {{size?.variant_size}}
                                    </div>
                                </div>
                            </div>
                            <div style="display: flex;
                            justify-content: center;
                            gap: 20px;">
                                <a class="btn-hisense-learn"
                                    [routerLink]="product?.product?.product_variants[product.currentIndex]?.relative_url">Learn
                                    More</a>
                                <a class="btn-hisense-more"
                                    (click)="buyOptions(product?.product?.product_variants[product.currentIndex]?.relative_url)">Where
                                    to buy</a>
                            </div>
                        </div>
                    </a>
                </ng-container>
            </ng-container>
        </div>
    </div>

    <!-- <a class="sub__cat__link" [routerLink]="subCat.relative_url" *ngIf="metaData?.subcategories.length > 1">{{subCat.name}}</a> -->
    <!-- <div class="product-listing" style="padding: 1rem;" *ngIf="metaData?.parent_category_id">
        <div [id]="subCat.code" *ngFor="let subCat of metaData?.subcategories">
            <div *ngFor="let prodCat of subCat.category_products">
                <div class="product__category__title">{{prodCat.product.name}}</div>

                <div class="product-listing-inner">
                    <a class="product-listing-tab" [routerLink]="prod.relative_url"
                        *ngFor="let prod of prodCat.product.product_variants">
                        <a class="product-listing-img trackin">
                            <img *ngIf="prod?.thumb_image_medium?.full_url" [src]="prod?.thumb_image_medium?.full_url">
                            <img *ngIf="!prod?.thumb_image_medium?.full_url" src="assets/images/prod__placeholder.png">
                        </a>
                        <div class="product-listing-tab-content">
                            <h4>{{prod.name}}</h4>
                            <h3>{{prod.variant_size}}</h3>
                            <div class="product-listing-description"></div>
                        </div>
                        <div class="product-listing-tab-buttons trackin" style="transform: translateY(35px);">
                            <div><a class="btn-hisense">More Detail</a></div>
                        </div>
                    </a>
                </div>
            </div>
        </div>
        <div style="padding: 1rem;" *ngFor="let prodCat of metaData?.category_products">
            <div class="product__category__title">{{prodCat.product.name}}</div>

            <div class="product-listing-inner">
                <a class="product-listing-tab" [routerLink]="prod.relative_url"
                    *ngFor="let prod of prodCat.product.product_variants">
                    <a class="product-listing-img trackin">
                        <img *ngIf="prod?.thumb_image_medium?.full_url" [src]="prod?.thumb_image_medium?.full_url">
                        <img *ngIf="!prod?.thumb_image_medium?.full_url" src="assets/images/prod__placeholder.png">
                    </a>
                    <div class="product-listing-tab-content">
                        <h4>{{prod.name}}</h4>
                        <h3>{{prod.variant_size}}</h3>
                        <div class="product-listing-description"></div>
                    </div>
                    <div class="product-listing-tab-buttons trackin" style="transform: translateY(35px);">
                        <div><a class="btn-hisense">More Detail</a></div>
                    </div>
                </a>
            </div>
        </div>
    </div> -->
</ng-container>

<ng-container *ngIf="show404">
    <app-not-found></app-not-found>
</ng-container>


<div class="modal" (click)="showPurchaseLinksModal = false" [ngClass]="{'show-modal': showPurchaseLinksModal}">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-image">
            <div *ngIf="purchaseLinks.length">
                <div class="product__head-buttons">
                    <a [href]="link?.purchase_link" target="_blank" *ngFor="let link of purchaseLinks">
                        <img class="purchase__link__image" [src]="getVendorImage(link.vendor)"
                            [ngClass]="[link.vendor]">
                    </a>
                </div>
            </div>
            <div *ngIf="!purchaseLinks.length">
                This product is not available for purchase right now.
            </div>
        </div>
        <button (click)="showPurchaseLinksModal = false" class="js-close">Dismiss</button>
    </div>
</div>